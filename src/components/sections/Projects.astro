---
import GitHub from "@/icons/GitHub.astro";
import Section from "../Section.astro";

import { projects } from "@cv";
import WorldMap from "@/icons/WorldMap.astro";
---

<!-- url, description, highlight, name, isActive -->
<Section>
    <h2>Proyectos</h2>
    <ul>
        {
            projects.map(
                ({
                    url,
                    github,
                    description,
                    isActive,
                    haveGithub,
                    haveWeb,
                    name,
                    highlights,
                }) => {
                    return (
                        <li>
                            <article>
                                <header>
                                    <h3>
                                        <a>{name}</a>
                                        {isActive && <span>&bull;</span>}
                                    </h3>
                                    <p>{description}</p>
                                </header>
                                <footer>
                                    <div class="highlights">
                                        {highlights.map((highlight) => {
                                            return <span>{highlight}</span>;
                                        })}
                                    </div>
                                    <div class="buttons">
                                        {haveWeb && (
                                            <a
                                                href={url}
                                                title={`See the web page of ${name}`}
                                            >
                                                <WorldMap />
                                                See Web Page
                                            </a>
                                        )}
                                        {haveGithub && (
                                            <a
                                                href={github}
                                                title={`See the code of ${name}`}
                                            >
                                                <GitHub /> See Code
                                            </a>
                                        )}
                                    </div>
                                </footer>
                            </article>
                        </li>
                    );
                },
            )
        }
    </ul>
</Section>

<style>
    h2 {
        margin-bottom: 1rem;
    }
    ul {
        display: grid;
        grid-template-rows: repeat(auto-fill, minmax(200px, 1fr));
        gap: 1rem;
    }

    article {
        border-radius: 6px;
        border: 1px solid #f2f2f2;
        gap: 16px;
        display: flex;
        flex-direction: column;
        padding: 16px;
        height: 100%;
    }

    header {
        flex: 1;
    }

    article h3 {
        margin-bottom: 4px;
    }

    article h3 span {
        color: #4a9ee9;
    }

    article a {
        color: #111;
    }

    article p {
        font-size: 0.75rem;
        line-height: 1.2;
        margin-bottom: 4px;
    }

    footer {
        display: inline-flex;
        flex-direction: row;
        justify-content: space-between;
        flex-wrap: wrap;
        gap: 4px;
        font-size: 0.6rem;
    }

    footer span {
        border-radius: 6px;
        background: #eee;
        color: #444;
        font-size: 0.6rem;
        font-weight: 500;
        padding: 0.2rem 0.6rem;
        margin-right: 4px;
    }

    footer a {
        display: inline-flex;
        flex-direction: row;
        align-items: center;
        text-decoration: none;
        border: 1px solid #4a9ee9;
        border-radius: 6px;
        background: none;
        color: #111;
        font-size: 0.8rem;
        font-weight: 500;
        padding: 0.2rem 0.6rem;
        transition: all 0.3s ease;

        svg {
            margin-right: 6px;
        }
    }

    footer a:hover {
        background-color: #4a9ee9;
        color: white;
        text-decoration: none;
        cursor: pointer;
    }
</style>
